<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    
    <!-- https://www.cssscript.com/fast-html-table-sorting/ -->
    
    <link rel="stylesheet" href="/frontend/plugins/sortables/sortable.min.css" />
    <!--Leaflet-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <!-- Customs -->
    <link href="/frontend/styles/index.css" rel="stylesheet" type="text/css">
    <link href="/frontend/styles/pages/points_interets.css" rel="stylesheet" type="text/css"/>
    
    <title>Cycle Site</title>
</head>

<body>
    <header class="container-fluid header" id="header">
        <div class="title">
            <a href="index.html">
                <button type="button" class="image-button"></button>
            </a>
            <h1 id="company-name">LifeCycle</h1>
        </div>
        <div class="navigation">
            <a href="itineraire.html" class="button-pressed" id="button-pressed">
            <a href="itineraire.html" class="button-pressed" id="button-pressed">
                <button class="button">
                    Itinéraires
                </button>
            </a>
            <a href="statistiques.html">
                <button class="button button-pressed">
                    Statistiques
                </button>
            </a>

            <div class="dropdown">
                <a class="btn btn-secondary dropdown-toggle active" href="points_interets.html" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Points d'intérêt
                </a>
              
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#" id="ajouterLink">Ajouter...</a></li>
                </ul>
              </div>
        </div>
        <div class="profileIcon">
            
        </div>
    </header>
    

    <div class="container-fluid principal">
        <div class="row">
            <div class="col col-lg-3">
                <div id="mapSmall" class="container mt-4" style="height: 225px;"></div>
                <h1>Point d'intérêt</h1>
                <p class="mb-3">Le site propose ces lieux d'intérêts qui auraient une utilitée aux cyclistes.</p>
                <label for="dateCompteur">Arondissement:</label>
                <select class="form-select select-territoires" id="locations" aria-label="Default select example">
                    <option selected>Tous</option>
                    
                </select>
                <label for="nomCompteur">Type</label>
                <select class="form-select" id="types" aria-label="Default select example">
                    <option value="fontaine" selected>Fontaines</option>
                    <option value="atelier">Ateliers</option>
                </select>
            </div>


            <div id="tableau-points-interets" class="col left-list">
                <div style="width:150px;" class="btn-group" role="group">
                    <div class="btn btn-primary">
                        <button  id="pop-up-modal">
                            <i class="fa-solid fa-location-dot"></i>
                        </button>
                    </div>
                <div class="row justify-content-end">
                        
                        <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                        Actions
                        </button>
                        <ul class="dropdown-menu">
                        <li><a class="dropdown-item" id="modifierBtn" href="#">Modifier</a></li>
                        <li><a class="dropdown-item" id="supprimerBtn" href="#">Supprimer</a></li>
                        </ul>
                    </div>
                </div>
                <div style="max-height:65vh; overflow-y: scroll;">
                    <table class="table table-bordered table-hover sortable" id="interest-table" style="background-color: white; " >
                        <thead>
                            <tr>
                                <th scope="col">Arondissement</th>
                                <th scope="col">Type</th>
                                <th scope="col">Nom du lieu</th>
                                <th scope="col">Adresse</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <form id="ajouter-form" class="col col-lg-9">
                <h2 id="form-title">Ajout d'un nouveau point d'intérêt</h2>
                <div class="col-12">
                    <label for="nom-lieu" class="form-label">Nom du lieu</label>
                    <input type="text" class="form-control" id="nom-lieu" placeholder="Fontaine à boire, atelier de réparation">
                </div>
                <div class="row g-3">
                    <div class="col-12">
                        <label for="adresse" class="form-label">Adresse</label>
                        <input type="text" class="form-control" id="adresse" placeholder="1234 Rue Montagne">
                    </div>
                </div>
                <div class="row g-3">
                    <div class="col-8">
                        <label for="arrondissement" class="form-label">Arrondissement</label>
                        <select id="arrondissement" class="form-select select-territoires">
                            <option selected>Tous</option>
                        </select>
                    </div>
                    <div class="col-4">
                        <label for="disponible-depuis" class="form-label">Disponible depuis</label>
                        <input type="date" class="form-control" id="disponible-depuis">
                    </div>
                </div>
                <div class="row g-3">
                    <div class="col-6">
                        <label for="type-lieu" class="form-label">Type de lieu</label>
                        <select id="type-lieu" class="form-select">
                            <option value="fontaine" selected>fontaine</option>
                            <option value="atelier">atelier</option>
                        </select>
                    </div>
                    <div class="col-3">
                        <label for="latitude" class="form-label">Latitude</label>
                        <input type="text" class="form-control" id="latitude" placeholder="45.12345">
                    </div>
                    <div class="col-3">
                        <label for="longitude" class="form-label">Longitude</label>
                        <input type="text" class="form-control" id="longitude" placeholder="-75.50087">
                    </div>
                </div>
                <div class="col-12">
                    <label for="remarques" class="form-label">Remarques</label>
                    <textarea class="form-control" id="remarques" rows="4" placeholder="Proche de plusieurs cafés et restaurants..."></textarea>
                </div>
                <br>
                <div class="row justify-content-center">
                    <div class="col-2">
                        <button id="annulerBtn" class="btn btn-primary annulerBtn">Annuler</button>
                    </div>
                    <div class="col-2">
                      <button id="enregistrerBtn" type="submit" class="btn btn-primary">Enregistrer</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class = "modal fade" id="mapModal" role="dialog" aria-hidden="true">
        <div class = "modal-dialog">
            <div class="modal-content">
                <div class="modalTitle" id="points-interets-title-change">
                    <h3>Points d'intérêt:</h3>
                </div>
                <div id="mapModalContainer"></div>
                <button class="close button" id="closeModal" data-bs-dismiss="modal">&times; Fermer</button>

            </div>
        </div>
    </div>
    <footer class="container-fluid footer">
        <div class="footer-button-list">
            <a href="https://www.facebook.com/" id="footer-link">
                <button class="footer-button" id="facebook-button"></button>
            </a>
            <a href="https://www.instagram.com/" id="footer-link">
                <button class="footer-button" id="instagram-button"></button>
            </a>
            <a href="https://www.twitter.com/" id="footer-link">
                <button class="footer-button" id="twitter-button"></button>
            </a>
        </div>
        <p name="copyright">&copy; 2023, GTI525 Groupe 02 - Équipe 05 </p>
    </footer>
    <!-- JQuery -->
    <!-- <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script> -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Sortable -->
    <script src="/frontend/plugins/sortables//sortable.min.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
        <!--FontAwesome-->
    <script src="https://kit.fontawesome.com/f36ea6eda1.js" crossorigin="anonymous"></script>    
    <script type="text/javascript" src="/frontend/scripts/pages/points_interets.js"></script>
    <script>        
        // Initialiser la carte, établir les coordonnées et le zoom
        var mapSmall = L.map('mapSmall').setView([45.5017, -73.5700], 9);
    
        // Ajouter un fournisseur de cartes (ex: OpenStreetMap)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(mapSmall);
        var infoIcon = L.divIcon({className: 'info-icon',html:'&#9432;'});
        L.marker([45.5017, -73.5700], {icon: infoIcon}).addTo(mapSmall);
    </script>
    <script>jQuery(fetch_territories($));</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    
</body>
</html>